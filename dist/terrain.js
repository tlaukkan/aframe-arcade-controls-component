!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t,r){"use strict";e.exports=function(e,t,r){return r>t?Math.max(Math.min(e,r),t):Math.max(Math.min(e,t),r)}},function(e,t){e.exports=function(e,t,r){return e*(1-r)+t*r}},function(e,t,r){"use strict";e.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},function(e,t,r){"use strict";var n=r(2);e.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,r,n,a,i,o=e[0]/360,s=e[1]/100,u=e[2]/100;if(0===s)return[i=255*u,i,i];t=2*u-(r=u<.5?u*(1+s):u+s-u*s),a=[0,0,0];for(var l=0;l<3;l++)(n=o+1/3*-(l-1))<0?n++:n>1&&n--,i=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,a[l]=255*i;return a}},n.hsl=function(e){var t,r,n=e[0]/255,a=e[1]/255,i=e[2]/255,o=Math.min(n,a,i),s=Math.max(n,a,i),u=s-o;return s===o?t=0:n===s?t=(a-i)/u:a===s?t=2+(i-n)/u:i===s&&(t=4+(n-a)/u),(t=Math.min(60*t,360))<0&&(t+=360),r=(o+s)/2,[t,100*(s===o?0:r<=.5?u/(s+o):u/(2-s-o)),100*r]}},function(e,t){e.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},function(e,t,r){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===n.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t){e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";(function(t){var n=r(6),a=r(5),i=r(4);e.exports=function(e){var r,s,u=[],l=1;if("string"==typeof e)if(n[e])u=n[e].slice(),s="rgb";else if("transparent"===e)l=0,s="rgb",u=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var d=e.slice(1),c=d.length,g=c<=4;l=1,g?(u=[parseInt(d[0]+d[0],16),parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16)],4===c&&(l=parseInt(d[3]+d[3],16)/255)):(u=[parseInt(d[0]+d[1],16),parseInt(d[2]+d[3],16),parseInt(d[4]+d[5],16)],8===c&&(l=parseInt(d[6]+d[7],16)/255)),u[0]||(u[0]=0),u[1]||(u[1]=0),u[2]||(u[2]=0),s="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var h=r[1],d=h.replace(/a$/,"");s=d;var c="cmyk"===d?4:"gray"===d?1:3;u=r[2].trim().split(/\s*,\s*/).map(function(e,t){if(/%$/.test(e))return t===c?parseFloat(e)/100:"rgb"===d?255*parseFloat(e)/100:parseFloat(e);if("h"===d[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==o[e])return o[e]}return parseFloat(e)}),h===d&&u.push(1),l=void 0===u[c]?1:u[c],u=u.slice(0,c)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(u=e.match(/([0-9]+)/g).map(function(e){return parseFloat(e)}),s=e.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(e))if(a(e)){var p=i(e.r,e.red,e.R,null);null!==p?(s="rgb",u=[p,i(e.g,e.green,e.G),i(e.b,e.blue,e.B)]):(s="hsl",u=[i(e.h,e.hue,e.H),i(e.s,e.saturation,e.S),i(e.l,e.lightness,e.L,e.b,e.brightness)]),l=i(e.a,e.alpha,e.opacity,1),null!=e.opacity&&(l/=100)}else(Array.isArray(e)||t.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e))&&(u=[e[0],e[1],e[2]],s="rgb",l=4===e.length?e[3]:1);else s="rgb",u=[e>>>16,(65280&e)>>>8,255&e];return{space:s,values:u,alpha:l}};var o={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,r(7))},function(e,t,r){const n=r(8),a=r(3),i=r(1),o=r(0);e.exports=function(e){return e=e.map(e=>{if("rgb"!=(e=n(e)).space){if("hsl"!=e.space)throw`${e.space} space is not supported.`;e.values=a.rgb(e.values)}return e.values.push(e.alpha),e.values}),(t,r=i)=>{t=o(t,0,1);let n=(e.length-1)*t,a=Math.floor(n),s=Math.ceil(n);t=n-a;let u=e[a],l=e[s],d=u.map((e,n)=>(e=r(e,l[n],t),n<3&&(e=Math.round(e)),e));return 1===d[3]?`rgb(${d.slice(0,3)})`:`rgba(${d})`}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=r(9);if("undefined"==typeof AFRAME)throw new Error("AFRAME not available.");if("undefined"==typeof THREE)throw new Error("THREE not available.");var i=function e(t,r,a){n(this,e),this.i=t,this.j=r,this.primary=a};window.TINY_TERRAIN=new function e(){n(this,e),this.heightFunctions=new Map,this.heightFunctions.set("default",function(e,t){return 0}),this.colorFunctions=new Map,this.colorFunctions.set("default",function(e,t,r,n,a,i){var o=((e-r)/(n-r)).toFixed(a);return i.has(o)||i.set(o,t(o)),i.get(o)})};var o=1/Math.sin(Math.PI/3);AFRAME.registerComponent("tiny-terrain",{schema:{x:{type:"number",default:0},y:{type:"number",default:0},z:{type:"number",default:0},radiusEdgeCount:{type:"number",default:300},edgeLength:{type:"number",default:1},heightFunction:{type:"string",default:"default"},colorFunction:{type:"string",default:"default"},palette:{type:"string",default:"#4f654e, #606f4e, #818553, #9b9557, #bab269, #c4bc74"},paletteAccuracy:{type:"number",default:2},paletteRangeMin:{type:"number",default:-10},paletteRangeMax:{type:"number",default:10}},init:function(){var e=this,t=this.data,r=this.el;this.edgeLength=t.edgeLength,this.edgeLengthSquared=this.edgeLength*this.edgeLength,this.radiusEdgeCount=t.radiusEdgeCount,this.radiusEdgeCountSquared=this.radiusEdgeCount*this.radiusEdgeCount,this.terrainUpdateDistanceSquared=Math.pow(this.radiusEdgeCount/2,2);var n=t.paletteRangeMin,s=t.paletteRangeMax,u=t.palette.split(",").map(function(e){return e.trim()}),l=t.paletteAccuracy,d=a(u),c=new Map,g=window.TINY_TERRAIN.heightFunctions.get(t.heightFunction),h=window.TINY_TERRAIN.colorFunctions.get(t.colorFunction);this.triangles=new Array(Math.pow(2*this.radiusEdgeCount+1,2)),this.vertices=new Array(2*this.radiusEdgeCount+1),this.vertexIndices=new Array(2*this.radiusEdgeCount+1),this.primaryFaces=new Array(2*this.radiusEdgeCount+1),this.secondaryFaces=new Array(2*this.radiusEdgeCount+1);for(var p=0;p<2*this.radiusEdgeCount+1;p++)this.vertices[p]=new Array(2*this.radiusEdgeCount+1),this.vertexIndices[p]=new Array(2*this.radiusEdgeCount+1),this.primaryFaces[p]=new Array(2*this.radiusEdgeCount+1),this.secondaryFaces[p]=new Array(2*this.radiusEdgeCount+1);this.geometry=new THREE.Geometry;var f=function(e,t,r){return r?Math.pow((e+.5)*o+t*o/2,2)+Math.pow(1*(t+.5),2):Math.pow((e+1)*o+t*o/2,2)+Math.pow(1*(t+.5),2)},y=function(t,r,n,a,i,s,u){var l=n+e.edgeLength*(t*o+r*o/2),d=i+e.edgeLength*(1*r),c=a+g(l,d);if(!e.vertices[t+e.radiusEdgeCount][r+e.radiusEdgeCount]){var h=new THREE.Vector3(l,c,d);return e.vertices[t+e.radiusEdgeCount][r+e.radiusEdgeCount]=h,e.vertexIndices[t+e.radiusEdgeCount][r+e.radiusEdgeCount]=s,e.geometry.vertices.push(h),s+1}if(!u){var p=e.vertices[t+e.radiusEdgeCount][r+e.radiusEdgeCount];p.x=l,p.y=c,p.z=d}return s},m=function(t,r,a,i){t.vertexColors[r]=new THREE.Color(h(e.geometry.vertices[a].y-i,d,n,s,l,c))},b=function(t,r){return e.vertexIndices[t+e.radiusEdgeCount][r+e.radiusEdgeCount]};this.updateTerrain=function(t,n,a,i){var o=0;e.triangles.forEach(function(r){o=function(e,t,r,n,a,i,o,s){return o?(i=y(e,t,r,n,a,i,s),i=y(e,t+1,r,n,a,i,s),i=y(e+1,t,r,n,a,i,s)):(i=y(e,t+1,r,n,a,i,s),i=y(e+1,t+1,r,n,a,i,s),i=y(e+1,t,r,n,a,i,s)),i}(r.i,r.j,t,n,a,o,r.primary,i),function(t,r,n,a,i,o,s){var u=b(t,o?r:r+1),l=b(o?t:t+1,r+1),d=b(t+1,r),c=o?e.primaryFaces:e.secondaryFaces,g=s?new THREE.Face3(u,l,d):c[t+e.radiusEdgeCount][r+e.radiusEdgeCount];m(g,0,u,a),m(g,1,l,a),m(g,2,d,a),s&&(e.geometry.faces.push(g),c[t+e.radiusEdgeCount][r+e.radiusEdgeCount]=g)}(r.i,r.j,0,n,0,r.primary,i)}),e.geometry.computeFaceNormals(),e.geometry.computeVertexNormals(),e.geometry.computeBoundingSphere(),e.geometry.verticesNeedUpdate=!0,e.geometry.elementsNeedUpdate=!0,i&&(e.material=new THREE.MeshLambertMaterial({color:16777215,vertexColors:THREE.VertexColors}),e.wireMaterial=new THREE.MeshLambertMaterial({color:14540253,wireframe:!0,vertexColors:THREE.VertexColors}),e.mesh=new THREE.Mesh(e.geometry,e.material),e.wire=new THREE.Mesh(e.geometry,e.wireMaterial),r.setObject3D("mesh",e.mesh),r.setObject3D("wire",e.wire))};var v=t.x,w=t.y,E=t.z;this.cx=v,this.cy=w,this.cz=E;for(var x=-this.radiusEdgeCount;x<this.radiusEdgeCount;x+=1)for(var C=-this.radiusEdgeCount;C<this.radiusEdgeCount;C+=1)f(x,C,!0)<=this.radiusEdgeCountSquared&&this.triangles.push(new i(x,C,!0)),f(x,C,!1)<=this.radiusEdgeCountSquared&&this.triangles.push(new i(x,C,!1));this.updateTerrain(v,w,E,!0)},update:function(e){var t=this.data,r=2*(t.x/(2*o)).toFixed()*o,n=t.y,a=4*(t.z/4).toFixed()*1;(this.cx-r)*(this.cx-r)+(this.cz-a)*(this.cz-a)>=this.terrainUpdateDistanceSquared*this.edgeLengthSquared&&(console.log("recalculated terrain at : "+this.data.x+","+this.data.y),this.cx=r,this.cy=n,this.cz=a,this.updateTerrain(r,n,a,!1))}}),AFRAME.registerPrimitive("a-tiny-terrain",{defaultComponents:{terrain:{}},mappings:{x:"tiny-terrain.x",y:"tiny-terrain.y",z:"tiny-terrain.z","radius-edge-count":"tiny-terrain.radiusEdgeCount","edge-length":"tiny-terrain.edgeLength","height-function":"tiny-terrain.heightFunction","color-function":"tiny-terrain.colorFunction",palette:"tiny-terrain.palette","palette-accuracy":"tiny-terrain.paletteAccuracy","palette-range-min":"tiny-terrain.paletteRangeMin","palette-range-max":"tiny-terrain.paletteRangeMax"}})}]);